\documentclass{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[frenchb]{babel}
\usepackage{amssymb}
\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage{hyperref}
\usepackage{verbatim}
\usepackage{listings}
\usepackage{graphicx}

\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\newcommand{\brokencell}[2][c]{\begin{tabular}[#1]{@{}c@{}}#2\end{tabular}}

\lstset{frame=single, breaklines=true,
          breakatwhitespace=true, basicstyle=\scriptsize,
          showstringspaces=false, escapeinside={(*}{*)},
          keywordstyle=\color{deepblue},
          stringstyle=\color{deepred},
          commentstyle=\color{deepgreen},
          literate=
                   {é}{{\'e}}1{É}{{\'E}}1
                   {è}{{\`e}}1{È}{{\`E}}1
                   {ê}{{\^e}}1{Ê}{{\^E}}1
                   {à}{{\`a}}1{À}{{\`A}}1
                   {ù}{{\`u}}1{Ù}{{\`U}}1
                   {û}{{\^u}}1{Û}{{\^U}}1
                   {ô}{{\^o}}1{Ô}{{\^O}}1
                   {ó}{{\'o}}1{Ó}{{\'O}}1
                   {ç}{{\c c}}1{Ç}{{\c C}}1
                   {œ}{{\oe}}1{Œ}{{\OE}}1
        }

\begin{document}
\title{Rapport du projet de théorie des jeux}
\author{Maxence Ahlouche \and Maxime Arthaud \and Korantin Auguste
          \and Martin Carton \and Thomas Forgione \and Thomas Wagner}
\date{11 novembre 2013}
\maketitle
\tableofcontents
\lstlistoflistings
\newpage

\section{Présentation de l'équipe}
  Cette équipe a été menée par Thomas Forgione, assisté de son Responsable
  Qualité Maxence Ahlouche. Les autres membres de l'équipe sont Martin Carton,
  Thomas Wagner, Maxime Arthaud, et Korantin Auguste.

  Tous les membres de l'équipe ont été présents à chacune des séances lors de
  cette UA.

\section{Shifumi}
\section{Morpion}
\section{Compétition/Duopole}
  Le but de ce jeu est de maximiser le gain d'une entreprise en concurrence
  avec une autre entreprise en fonction de leur production.

  \subsection{Analyse}
    Notre gain étant égal à $g_x(x) = -x(x+y-3)$ avec $x$ et $y$ les
    productions respectives des deux entreprises, pour le maximiser il
    suffirait de jouer $x=\frac{3-y}{2}$ (c'est que fait la stratégie fournie
    \verb+noncooperatif+).
    
    Cependant au moment de décider quelle quantité produire nous ne connaissons
    pas la production $y$ de l'entreprise concurrente. De plus si les deux
    entreprises s'ignorent totalement en essayant de maximiser leur seul gain,
    elles gagneront au final moins que deux entreprises qui coopèrent
    totalement c'est à dire qui chercheraient à maximiser leur gain total
    $g_x(x)+g_y(y)$ avec $g_x(x) = g_y(y)$ c'est à dire en jouant $x=y=0.75$.
    En effet, elles gagneront alors chacune $\frac 9 8$ à chaque tour au lieu
    de $1$ si elles sont toutes les deux non-coopératives.

    Nous avons donc essayé plusieurs stratégies différentes, qui essayent de
    maximiser le gain de l'entreprise en tenant en compte l'autre entreprise,
    les productions et les gains des tours précédents.

  \subsection{Stratégies}
    \subsubsection{Stackelberg}
      Todo: Pourquoi 2/3? Pourquoi 1.1*2/3 c'est mieux.

      Une variante de cette stratégie consiste à utiliser la production moyenne
      de l'autre joueur plutôt que seulement la dernière valeur. Elle permet
      d'obtenir des résultats légèrement meilleurs.

      De plus en coopérant avec l'autre joueur (voir listing~\ref{lst:mmmttk})
      si celui-ci coopère, on obtient de meilleurs résultats.

      Enfin, une autre variante de cette stratégie (voir
      listing~\ref{lst:mmmttkv2}) maximise le gain si l'autre joueur a joué une
      constante sur les derniers tours. Cette variante donne des résultats
      moyens un peu moins bons, mais est la meilleure dans le pire des cas:
      elle est donc adaptée à une entreprise qui veut minimiser ses risques.

    \subsubsection{Stratégie pénalisante}
      % Todo: ...  est d'être coopérati(f|ve) ? agressi(f|ve)
      Le principe de cette stratégie (voir listing~\ref{lst:penalise}) est
      d'être coopératif tant que l'adversaire l'est, et de devenir plus
      agressif quand il ne l'est plus: à chaque fois que l'autre joueur n'est
      pas coopératif, on joue comme le ferait la stratégie Stackelberg.

      Une variante de cette stratégie (voir listing~\ref{lst:penaliseviolent})
      consiste à le pénaliser de plus en plus: la première fois on le pénalise
      une fois, puis deux, puis trois, etc.

      Ces deux stratégies sont efficaces à la fois quand l'autre joueur est
      coopératif (on est alors coopératif) et contre un joueur non-coopératif
      (on devient alors agressif).

    \subsubsection{Stratégie évolutive}
      Une autre stratégie (voir listing~\ref{lst:pokemon}) que nous avons
      développée consiste à augmenter la production si la dernière augmentation
      a augmenté notre gain ou si la dernière diminution l'a diminué et
      vice-versa.

      Celle-ci est plutôt efficace, mais n'est pas la meilleure que nous ayons
      développée: elle se met souvent à osciller inutilement.

    \subsubsection{Stratégie polynomiale}
      Enfin, une autre stratégie (voir listing~\ref{lst:poly}) joue en fonction
      de la production moyenne de l'autre joueur telle que:
      \begin{itemize}
        \item $f(0) = 1.125$: on joue beaucoup si l'autre joue peu, sans jouer
          trop pour ne pas le fâcher;
        \item $f(0.75) = 0.75$: elle coopère avec quelqu'un qui coopère;
        \item $f(1.5) = 0.75$: elle coopère avec quelqu'un qui ne coopère pas,
          pour essayer de faire coopérer celui-ci (c'est dans notre intérêt et
          ça ne changerait pas son gain, il est donc possible qu'elle le
          fasse).
      \end{itemize}

      On choisit alors la fonction $f$ pour être un polynôme qui interpole ces
      valeurs.

      Cette méthode s'avère très efficace en moyenne.

  \subsection{Comparaison}
    La table~\ref{table:coop_results} montre les résultats obtenus par les
    quelques stratégies que nous avions à notre disposition\footnote{Les
    stratégies fournies par les professeurs, les notres et des stratégies
    «~prêtées~» par d'autres groupes pour les tests.} pour une durée de $100$
    tours. Nous faisons s'opposer toutes les stratégies entre elles puis notons
    pour chacune d'elles son gain minimal, moyen et maximal\footnote{Cette
    table peut être générée par le script matlab \textit{comp\_tests.m} fourni
    dans l'archive.}.

    Todo: mettre à jour avec les dernières valeurs quand on aura fini et mettre
    les résultats pour un autre nombre de tours.
    \begin{table}[h]
      \centering
      \begin{tabular}{|c||c|c|c|}
        \hline
        Stratégie      & Gain minimal & Gain moyen & Gain maximum \\\hline\hline
        Coopératif     & $110.75$     & $114.02$   & $125.156$    \\\hline
        Non coopératif & $83.25$      & $96.16$    & $109.13$     \\\hline
        Stackelberg    & $54.42$      & $64.67$    & $72.75$      \\\hline
        Pénalise       & $0$          & $44.98687$ & $109.01$     \\\hline
      \end{tabular}
      \caption{Résultats des différentes stratégies sur 100 tours}
      \label{table:coop_results}
    \end{table}
    
\pagebreak[4] %todo: moué, quand le rapport sera fini on pourra peut être virer ça, dont le but est de ne pas mettre un début de listing en bas d'une page, la table de tests sur le haut de la page suivante puis la fin du listing commencé sur la page précédente.
\section{Annexes}
  \lstinputlisting[label=lst:mmmttk, language=matlab, caption=Statégie Stackelberg sur la moyenne]{duopole/mmmttk.m}
  \lstinputlisting[label=lst:mmmttkv2, language=matlab, caption=Statégie Stackelberg sur la moyenne (variante)]{duopole/mmmttkv2.m}
  \lstinputlisting[label=lst:penalise, language=matlab, caption=Statégie pénalisante]{duopole/penalise.m}
  \lstinputlisting[label=lst:penaliseviolent, language=matlab, caption=Statégie pénalisante (variante)]{duopole/penalise_violent.m}
  \lstinputlisting[label=lst:pokemon, language=matlab, caption=Stratégie évolutive]{duopole/evolutif.m}
  \lstinputlisting[label=lst:poly, language=matlab, caption=Stratégie polynomiale]{duopole/poly.m}
  
\end{document}
